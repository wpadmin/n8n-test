# Telegram Bot на n8n

Telegram бот с автоматическими рассылками и уведомлениями.

## Как запустить

### 1. Создайте бота в Telegram

1. Найдите [@BotFather](https://t.me/BotFather) в Telegram
2. Напишите `/newbot` и следуйте инструкциям
3. Скопируйте полученный токен

### 2. Настрой проект

1. Скопируйте файл `.env.example` в `.env`
2. Вставьте свой токен бота в `.env`
3. Получите токен ngrok на [ngrok.com](https://dashboard.ngrok.com/get-started/your-authtoken)
4. Вставьте токен ngrok в `.env`

### 3. Запустите проект

```bash
docker compose up -d
```

### 4. Откройте n8n

Перейди по адресу: [http://localhost:5678](http://localhost:5678)

**Логин:** admin
**Пароль:** admin

### 5. Импортируйте workflows

1. В n8n нажмите **Settings** (шестерёнка справа вверху)
2. Выберите **Import from File**
3. Загрузите все файлы из папки `workflows/`
4. В каждом workflow:
   - Откройте ноду Telegram
   - Нажмите **Credentials** → **Create New**
   - Вставьте свой токен бота
   - Сохраните

## Как пользоваться

### Регистрация пользователей

1. Напишите боту `/start` в Telegram
2. Бот зарегистрирует тебя и ответит приветствием

### Запуск рассылки

1. В n8n откройте workflow **2-forma-zapuska-rassylki**
2. Нажмите на ноду **Form Trigger**
3. Скопируйте **Test URL** и откройте в браузере
4. Выберите аудиторию и запустите
5. Рассылка запустится автоматически

### Остановка проекта

```bash
docker compose down
```

## Структура базы данных

**users** - зарегистрированные пользователи
**messages** - история отправленных сообщений
**message_queue** - очередь с повторными попытками

---

Подробная техническая документация в файле `Диаграмма n8n.drawio.pdf`
